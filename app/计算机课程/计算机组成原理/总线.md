# 总线
## 一、基本概念
* 1.总线：是连接各个部件的信息传输线，是各个部件共享的传输介质。
### 1.五大部件的连接方式 
> 1.分散连接：各个部件之间使用单独线连接。     
> 2.总线连接：各个部件连接到一组公共信息传输线上。
### 2.总线的分类
* 1.按数据传送方式分：并行传输总现、串行传输总线
* 2.按照宽度分：8位、16位、32位
* 3.适用范围划分：计算机总线、测控总线、网络通信总线
* 4.按连接部件不同划分：片内总线、系统总线、通信总线
> 1.片内总线：芯片内部的总线。CPU内部，寄存器与寄存器之间的连接。  
> 2.系统总线：CPU外，主机之内。（各大部件之间的信息传输线）数据总线，地址总线，控制总线
### 3.系统总线（数据总线，地址总线，控制总线）
* 1.数据总线：双向，与机器字长、存储字长有关，其位数为总线宽度。
* 2.地址总线：单项，指的主存的地址、与存储地址、I/O地址有关。地址线的位数与存储单元的个数有关。__MAR,2^MAR = 存储单元的个数__
* 3.控制总线：单向，用来发各种信号
## 二、特性和性能指标
### 1.特性
* 1.机械特性：机械上的可靠连接（插座标准、尺寸、形状、引脚个数等）
* 2.电气特性：每个传输线的方向和有效电平范围。
* 3.功能特性：每个传输线的功能（地址，数据，控制总线）。
* 4.时间特性：任一根线在什么时间内有效，用信号时序图描述。
### 2.性能指标
* 1.总线宽度：数据总线的根数。bit,位
* 2.总线带块：单位时间内传输的数据位数Mbps = bit pre second  (1B = 8bit)
* 3.时钟同步/异步：计算机内部应用统一的时钟信号便是同步。（分频也算同步）
* 4.总线复用：地址线和数据线复用，分时使用。
* 5.信号线束：三种总线的和。（比总线要大，三种总线的根数和）
* 6.总线的控制方式：各种设备如何使用总线的方式。
* 7.其它：负载能力、电源电压、总线宽度能否扩展等。
### 3.总线标准
> 1.概念：系统与各模块、模块与1模块之间的一个互连的标准界面。这个界面对两端的模块都是透明的。（我们不知道是什么标准）  
> 2.解决问题：系统、模块、设备、总线之间不适应、不通用以及不匹配的问题。

* 1.总线宽度
* 2.时钟频率（独立 == 异步）
* 3.带宽
* 4.USB :通用串行总线
* 5.PCI:支持突发，猝发的工作方式。如果被传送的数据在主存中连续存放，则在访问数据是，只需要给出第一个数据的地址，占用一个时钟周期。之后都是数据总线按时钟周期传输。（声卡等）
* 6.AGP总线：显卡专用的局部总线，2.1GBps(显卡)
* 7.PCI_E：PCI使用的是共享并行总线架构，PCI主机和所有设备贡献一组通用的地址，数据和控制线。PCI_E基于点到点拓扑，8GBPS以上(转向的连接).
## 三、总线结构
> 总线结构分为单总线和双总线结构。
* 1.通道：具有特殊功能的__处理器__（比接口的功能强）
* 2.单总线，双总线，四总线
## 四、总线控制
* 1.由总线控制器统一管理。
* 2.总线控制包括两个任务：判优控制（多个部件同时访问，谁来使用）和通信控制（什么时候发送信息，如何给信息传送定时）。
* 3.主设备（对总线有控制权），从设备（响应从主设备传来的总线命令）
* 4.总线判优：集中式判优和分布式判优。
### 判断控制（集中判优）
> 链式查询、计数器定时查询、独立请求方式
* 1.BR：总线请求。
* 2.BS:总线繁忙。
### 通信控制
> 1.解决通信双方的协调配合问题  
> 2.总线周期：  
> （1）申请分配阶段：主模块申请，总线仲裁决定。  
> （2） 寻址阶段：主模块向从模块给出地址和命令，启动从模块
> （3）传数阶段：主模块和从模块交换数据。  
> （4）结束阶段：主模块撤销有关信息，让出总线的使用权。  
> 3.总线的4种通讯方式：  
> （1）同步通信：规定明确统一，模块间的配合简单一致  
> （2）异步通信：允许模块不一致，采用应答方式。不互锁，半互锁，全互锁。  
> （3）半同步通信：有WAIT去等待慢的操作  
> （4）分离式通信：主模块申请完，寻址完放弃总线使用权，从模块读取数据不占用总线，传送数据的时候再去申请总线(此时的从模块相当于主模块)
### 异步串行通信
* 1.数据传送速率一般用波特衡量。
* 2.波特率：单位时间内传送二进制数据的—__位数__，单位bps。
* 3.比特率：单位时间内传送二进制有效数据的__位数__，bps
* 4.图中左面是低位，右面是高位。偶校验是偶数取0
### 分离式通信
* 1.各模块均可以申请占用总线。
* 2.采用同步方式，不等对方应答。
* 3.各模块准备数据的时候，不占用总线。
* 4.总线被占用的时候都在做有效的工作，无空闲。